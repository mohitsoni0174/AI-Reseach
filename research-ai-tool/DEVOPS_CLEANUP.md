# üõ†Ô∏è DevOps: Production Repository Cleanup

## Terminal Commands (Copy & Paste These)

### Step 1: Remove node_modules and dist from git tracking (SAFE - doesn't delete files)

```powershell
# Navigate to project root
cd C:\Users\MOHIT\Desktop\as\research-ai-tool

# Remove node_modules from git tracking (keeps local files intact)
git rm -r --cached frontend/node_modules

# Remove dist from git tracking (keeps local files intact)
git rm -r --cached frontend/dist

# Remove old .gitignore if it had dist tracked
git rm -r --cached frontend/.gitignore

# Verify what will be removed before committing
git status
```

### Step 2: Stage the cleanup

```powershell
# Add updated .gitignore
git add frontend/.gitignore

# Commit the removal of tracked node_modules and dist
git commit -m "chore: Remove node_modules and dist from git tracking

- Removed tracked frontend/node_modules/ folder from repository
- Removed tracked frontend/dist/ folder from repository
- Updated .gitignore to prevent future commits
- These files will be regenerated by Render during build
- Reduces repository size from ~500MB to ~5MB"
```

### Step 3: Push clean state to GitHub

```powershell
git push origin main
```

### Step 4: Verify cleanup (optional)

```powershell
# Check that node_modules and dist are not tracked
git ls-files frontend/ | grep -E "(node_modules|dist)" 

# Should return: (empty - no results)
```

---

## Why node_modules Should Never Be Committed

1. **Size**: Each npm project = 100-500MB (bloats repository)
2. **Redundancy**: `package.json` + `package-lock.json` = everything needed to regenerate
3. **Platform Issues**: Windows vs macOS vs Linux = different binary dependencies
4. **CI/CD**: Build systems like Render regenerate from package.json anyway
5. **Merge Conflicts**: Every npm update creates massive conflicts
6. **Security**: Harder to audit dependencies in git history

**Industry Standard**: ALL professional projects exclude node_modules from git.

---

## Render Configuration (Verify These Settings)

Navigate to: https://dashboard.render.com/

**Frontend Service Settings:**

| Setting | Value | Status |
|---------|-------|--------|
| Root Directory | `frontend` | ‚úÖ Must be set |
| Build Command | `npm install && npm run build` | ‚úÖ Correct |
| Publish Directory | `dist` | ‚úÖ Correct |
| Environment: VITE_API_URL | `https://ai-research.onrender.com` | ‚úÖ Set |

**Render Build Process (What happens):**
1. Source code pulled from GitHub (no node_modules)
2. `npm install` runs = recreates node_modules from package.json
3. `npm run build` runs = creates dist folder
4. dist/ uploaded to CDN
5. node_modules cleaned up after build
6. **Result**: Lightweight deployment (~5MB)**

---

## Expected Results After Cleanup

**Before:**
```
repository size: ~500MB
frontend/node_modules: 350MB ‚ùå (tracked in git)
frontend/dist: 50MB ‚ùå (tracked in git)
```

**After:**
```
repository size: ~5MB ‚úÖ
frontend/node_modules: locally present only (not in git)
frontend/dist: generated fresh by Render on each deploy
```

---

## Next Action: Deploy to Render

After push completes:
1. Go to Render Dashboard
2. Click "Rollback" then "Manual Deploy"
3. Or wait for auto-deploy (since autoDeploy: true in render.yaml)

**Expected build time**: 2-3 minutes (faster now without node_modules)

‚úÖ **Your app will build successfully on Render!**

---

## Package.json Scripts (Unchanged)

These remain exactly the same:

```json
{
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview"
  }
}
```

‚úÖ No modifications needed.

---

**Run the terminal commands above in order. Report any errors!** üöÄ
